{% extends "base.html" %}

{% block title %}User: {{ user.name }} - {% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ url_for('static', filename='view.css') }}">
{% endblock %}

{% block content %}
<div class="base-container"><h2>User: {{ user.name }}</h2>
    <table>
        <thead>
            <tr>
                <td>Username</td>
                <td>{{ user.name }}</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>User ID</td>
                <td>{{ user.id }}</td>
            </tr>
            <tr>
                <td>Last logon</td>
                <td>{{ user.lastlogon }}</td>
            </tr>
            <tr>
                <td>Credits accumulated</td>
                <td>{{ user.credits }}</td>
            </tr>
            <tr>
                <td>Reported samplings</td>
                <td>{% if reports|length > 0 %}
                    {% for i in range(reports|length) %}
                        {% if i < 9 %}
                            {% if not reports[i].deleted %}
                            <a href="{{ url_for('view_report', report_id=reports[i].id) }}">Report {{ reports[i].id }}</a><br>
                            {% endif %}
                        {% endif %}
                        {% if i == 9 %}
                            <span class="note">
                                <a href="{{ url_for('search', query=user.name) }}">show all {{ reports|length }} reports</a>
                            </span>
                        {% endif %}
                    {% endfor %}
                    {% else %}
                        None
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td>Latest symptoms:</td>
                <td>{% if symptom_reports|length > 0 %}
                    {% for i in range(symptom_reports|length) %}
                        {% if i < 10 %}
                            <a href="{{ url_for('view_report', report_id=symptom_reports[i].report_id) }}">Report {{ symptom_reports[i].report_id }}</a>: {{ symptom_reports[i].name }}
                            <br>{{ symptom_reports[i].date }}, {% if symptom_reports[i].blanched == 1 %}blanched<br>{% else %}unblanched<br>
                        {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% else %}
                        None
                    {% endif %}</td>
            </tr>
        </tbody>
    </table>
</div>
{% endblock %}